<script>
const PRICE = 250000;
const API = "https://script.google.com/macros/s/AKfycbwb6WVV4cZa1jSzJufJuJnD3f5jx_J8N8TaxrgScMRwMO1hU__UPI01tp7YuSdItddG/exec";

const qty = document.getElementById("quantity");
const total = document.getElementById("total");

qty.addEventListener("change", ()=>{
  total.innerText = (qty.value * PRICE).toLocaleString("vi-VN");
});

document.getElementById("orderForm").addEventListener("submit", function(e){
  e.preventDefault();

  const formData = new FormData();
  formData.append("product","Bơm mini 12V 150W");
  formData.append("name", document.getElementById("name").value);
  formData.append("phone", document.getElementById("phone").value);
  formData.append("address", document.getElementById("address").value);
  formData.append("note", document.getElementById("note").value);
  formData.append("quantity", qty.value);
  formData.append("total", qty.value * PRICE);

  fetch(API,{
    method:"POST",
    body: formData
  })
  .then(res => res.text())
  .then(()=>{
    const r = document.getElementById("result");
    r.style.display="block";
    r.innerHTML = `
      ✅ ĐẶT HÀNG THÀNH CÔNG!<br>
      Số lượng: <b>${qty.value}</b><br>
      Tổng tiền: <b>${(qty.value * PRICE).toLocaleString("vi-VN")} đ</b>
    `;
    document.getElementById("orderForm").reset();
    total.innerText = PRICE.toLocaleString("vi-VN");
  })
  .catch(err=>{
    alert("❌ Không gửi được đơn, vui lòng thử lại");
    console.error(err);
  });
});
</script>
